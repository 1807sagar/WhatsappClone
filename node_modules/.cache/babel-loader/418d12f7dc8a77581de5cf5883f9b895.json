{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\New folder\\\\WhatsappClone\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from\"react\";import{Avatar,IconButton}from\"@material-ui/core\";import AttachFile from\"@material-ui/icons/AttachFile\";import MoreVertIcon from\"@material-ui/icons/MoreVert\";import SearchOutlined from\"@material-ui/icons/SearchOutlined\";import InsertEmoticonIcon from\"@material-ui/icons/InsertEmoticon\";import MicIcon from\"@material-ui/icons/Mic\";import ArrowBackIcon from\"@material-ui/icons/ArrowBack\";import db from\"./firebase\";import firebase from\"firebase\";import\"./Chat.css\";import{Link,useParams}from\"react-router-dom\";import{useStateValue}from\"./StateProvider\";import{actionTypes}from\"./reducer\";import UseWindowDimensions from\"./UseWindowDimensions\";import useSound from\"use-sound\";import\"emoji-mart/css/emoji-mart.css\";import{Picker}from\"emoji-mart\";import Linkify from\"react-linkify\";function Chat(){var _messages$timestamp,_messages$timestamp2,_messages$timestamp3;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),seed=_useState2[0],setSeed=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),input=_useState4[0],setInput=_useState4[1];var _useParams=useParams(),roomId=_useParams.roomId;var _useState5=useState(\"false\"),_useState6=_slicedToArray(_useState5,2),roomName=_useState6[0],setRoomName=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),messages=_useState8[0],setMessages=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),toggler=_useState10[0],setToggler=_useState10[1];var displayName=localStorage.getItem(\"displayName\");var _useStateValue=useStateValue(),_useStateValue2=_slicedToArray(_useStateValue,2),togglerState=_useStateValue2[0].togglerState,dispatch=_useStateValue2[1];var _useStateValue3=useStateValue(),_useStateValue4=_slicedToArray(_useStateValue3,1),photoURL=_useStateValue4[0].photoURL;var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),emoji=_useState12[0],setEmoji=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),issendChecked=_useState14[0],setIssendChecked=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),datewise=_useState16[0],setDateWise=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),clientGMT=_useState18[0],setClinetGMT=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),lastseenPhoto=_useState20[0],setLastseen=_useState20[1];// const [isRecChecked, setIsRecChecked]=useState(1);\nvar _UseWindowDimensions=UseWindowDimensions(),width=_UseWindowDimensions.width;var hour=0,extramin=0,minutes=0,hourly=0,GMTminutes=String(clientGMT).slice(4,6),scrl,fix=0;// console.log(GMTminutes)\n//console.log(roomId);\nvar _useSound=useSound(\"\".concat(process.env.PUBLIC_URL,\"/send.mp3\"),{volume:0.5}),_useSound2=_slicedToArray(_useSound,1),playOn=_useSound2[0];var _useSound3=useSound(\"\".concat(process.env.PUBLIC_URL,\"/send.mp3\"),{volume:0.5}),_useSound4=_slicedToArray(_useSound3,1),playOff=_useSound4[0];var addEmoji=function addEmoji(e){var emoji=e.native;setInput(input+emoji);};var checkEmojiClose=function checkEmojiClose(){if(emoji){setEmoji(false);}};//console.log(photoURL);\n// console.log(messages);\nfunction getTimeZone(){var offset=new Date().getTimezoneOffset(),o=Math.abs(offset);return(offset<0?\"+\":\"-\")+(\"00\"+Math.floor(o/60)).slice(-2)+\":\"+(\"00\"+o%60).slice(-2);}useEffect(function(){setClinetGMT(getTimeZone());//  console.log(clientGMT);\n});useEffect(function(){setSeed(Math.floor(Math.random()*5000));if(roomId){db.collection(\"rooms\").doc(roomId).onSnapshot(function(snapshot){setRoomName(snapshot.data().name);});db.collection(\"rooms\").doc(roomId).collection(\"messages\").orderBy(\"timestamp\",\"asc\").onSnapshot(function(snapshot){setMessages(snapshot.docs.map(function(doc){return doc.data();}));});}},[roomId]);useEffect(function(){var _messages;setLastseen((_messages=messages[messages.length-1])===null||_messages===void 0?void 0:_messages.photoURL);},[messages]);//  console.log(lastseenPhoto);\nvar sendMessage=function sendMessage(e){e.preventDefault();// console.log(\"You Typedd >>>>\",input);\nif(input.length>0){db.collection(\"rooms\").doc(roomId).collection(\"messages\").add({message:input,name:displayName,timestamp:firebase.firestore.FieldValue.serverTimestamp(),photoURL:localStorage.getItem(\"photoURL\")});setIssendChecked(!issendChecked);issendChecked?playOff():playOn();setInput(\"\");}};// for deletion in future\n// let collectionRef = fs.collection(\"rooms\");\n// collectionRef.where(\"name\", \"==\", name)\n// .get()\n// .then(querySnapshot => {\n// querySnapshot.forEach((doc) => {\n//     doc.ref.delete().then(() => {\n//     console.log(\"Document successfully deleted!\");\n//     }).catch(function(error) {\n//     console.error(\"Error removing document: \", error);\n//     });\n// });\n// })\n// .catch(function(error) {\n// console.log(\"Error getting documents: \", error);\n// });\nvar blankObj={};var TotalObj=[];if(messages.length>0){// for( const message in messages){\n// }\nvar checkDate=\"\";var blankArray=[];var dateArray=[];messages.forEach(function(message,i){var _message$timestamp;var messageDate=String(new Date((_message$timestamp=message.timestamp)===null||_message$timestamp===void 0?void 0:_message$timestamp.toDate()).toUTCString()).slice(5,12);if(dateArray.indexOf(messageDate)===-1){dateArray.push(messageDate);}});//let tempObj={};\nvar index=0;messages.forEach(function(message,i){var _message$timestamp2;var messageDate=String(new Date((_message$timestamp2=message.timestamp)===null||_message$timestamp2===void 0?void 0:_message$timestamp2.toDate()).toUTCString()).slice(5,12);// console.log((message.timestamp+new Date()?.getTimezoneOffset()))\nif(messageDate===dateArray[index]&&i==messages.length-1){blankArray.push({messageData:message.message,name:message.name,timestamp:message.timestamp});blankObj[dateArray[index]]=blankArray;TotalObj.push(blankObj);blankObj={};blankArray=[];blankArray.push({messageData:message.message,name:message.name,timestamp:message.timestamp});index=index+1;}else if(messageDate==dateArray[index]){blankArray.push({messageData:message.message,name:message.name,timestamp:message.timestamp});}else{blankObj[dateArray[index]]=blankArray;TotalObj.push(blankObj);blankObj={};blankArray=[];blankArray.push({messageData:message.message,name:message.name,timestamp:message.timestamp});if(messageDate!=dateArray[index]&&i==messages.length-1){blankObj[messageDate]=blankArray;TotalObj.push(blankObj);}index=index+1;}});}useEffect(function(){setDateWise(TotalObj);},[messages]);//  console.log(TotalObj);\n// if(Object.keys(datewise).length !== 0){\n//     Object.entries(datewise).forEach(\n//         ([key, value]) => {\n//             console.log(key);\n//             value.forEach((item,i)=>{\n//                 console.log(item.messageData,item.name);\n//             });\n//         }\n//     );\n// }\nvar messagesEndRef=useRef(null);var scrollToBottom=function scrollToBottom(){if(messagesEndRef.current){messagesEndRef.current.scrollIntoView({behavior:\"smooth\"});}// console.log('called')\n};useEffect(function(){scrollToBottom();});useEffect(function(){setToggler(!toggler);},[togglerState]);useEffect(function(){scrollToBottom();//   scrl= document.getElementById(\"chat__box\")\n//  console.log(messagesEndRef.current.clientHeight);\n//  scrl.scrollIntoView(false);\n},[messages]);var handleDrawerToggle=function handleDrawerToggle(){setToggler(!toggler);dispatch({type:actionTypes.SET_TOGGLER,togglerState:togglerState+1});};return/*#__PURE__*/React.createElement(React.Fragment,null,width<629?/*#__PURE__*/React.createElement(\"div\",{className:togglerState%2===0?\"chat\":\"chat hide__chat\"},/*#__PURE__*/React.createElement(\"div\",{className:\"chat__header\"},/*#__PURE__*/React.createElement(IconButton,{color:\"inherit\",\"aria-label\":\"open drawer\",edge:\"start\",onClick:handleDrawerToggle},/*#__PURE__*/React.createElement(ArrowBackIcon,null)),/*#__PURE__*/React.createElement(Avatar,{src:lastseenPhoto}),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__headerInfo\"},/*#__PURE__*/React.createElement(\"h3\",null,roomName),/*#__PURE__*/React.createElement(\"p\",{className:\"header__lastSeen\"},\"last seen\",\" \",messages.length!==0?(_messages$timestamp=messages[messages.length-1].timestamp)===null||_messages$timestamp===void 0?void 0:_messages$timestamp.toDate().toUTCString():\"Loading\")),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__headerRight\"},/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(SearchOutlined,null)),/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(AttachFile,null)),/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(MoreVertIcon,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__header__absolute\"},/*#__PURE__*/React.createElement(IconButton,{color:\"inherit\",\"aria-label\":\"open drawer\",edge:\"start\",onClick:handleDrawerToggle},/*#__PURE__*/React.createElement(ArrowBackIcon,null)),/*#__PURE__*/React.createElement(Avatar,{src:lastseenPhoto}),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__headerInfo\"},/*#__PURE__*/React.createElement(\"h3\",null,roomName),/*#__PURE__*/React.createElement(\"p\",{className:\"header__lastSeen\"},\"last seen\",\" \",messages.length!==0?String((_messages$timestamp2=messages[messages.length-1].timestamp)===null||_messages$timestamp2===void 0?void 0:_messages$timestamp2.toDate().toUTCString()).slice(0,22):\"Loading\")),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__headerRight\"},/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(SearchOutlined,null)),/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(AttachFile,null)),/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(MoreVertIcon,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__body\"},datewise.length>0?datewise.map(function(item,i){return(//  <div className=\"chat__body__daystamp\">\n//     <p className=\"chat__body__daystamp__title\">{Object.keys(item)}</p>\n//  </div>\nitem[Object.keys(item)].map(function(e,i){var _e$timestamp,_e$timestamp2,_e$timestamp3,_e$timestamp4,_e$timestamp5,_e$timestamp6,_e$timestamp7,_e$timestamp8,_e$timestamp9,_e$timestamp10,_e$timestamp11,_e$timestamp12,_e$timestamp13,_e$timestamp14,_e$timestamp15,_e$timestamp16;return i==0?/*#__PURE__*/React.createElement(React.Fragment,null,String(Object.keys(item)).slice(0,2)!==\"id\"&&parseInt(String(Object.keys(item)).slice(0,2))?/*#__PURE__*/React.createElement(\"div\",{className:\"chat__body__daystamp\"},/*#__PURE__*/React.createElement(\"p\",{className:\"chat__body__daystamp__title\"},parseInt(String(Object.keys(item)).slice(0,2))==parseInt(String(new Date().getDate()))?\"TODAY\":Object.keys(item))):null,/*#__PURE__*/React.createElement(\"p\",{className:\"chat__messages \".concat(e.name===displayName&&\"chat__reciever\")},/*#__PURE__*/React.createElement(\"span\",{className:\"chat__name\"},e.name.substr(0,e.name.indexOf(\" \"))),/*#__PURE__*/React.createElement(Linkify,null,e.messageData),/*#__PURE__*/React.createElement(\"span\",{className:\"chat__timestamp\"},/*#__PURE__*/React.createElement(\"div\",{className:\"hidden\"},extramin=parseInt(String(new Date((_e$timestamp=e.timestamp)===null||_e$timestamp===void 0?void 0:_e$timestamp.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)>60?(parseInt(String(new Date((_e$timestamp2=e.timestamp)===null||_e$timestamp2===void 0?void 0:_e$timestamp2.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes))%60:0,minutes=parseInt(String(new Date((_e$timestamp3=e.timestamp)===null||_e$timestamp3===void 0?void 0:_e$timestamp3.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix>60?(parseInt(String(new Date((_e$timestamp4=e.timestamp)===null||_e$timestamp4===void 0?void 0:_e$timestamp4.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix)%60:parseInt(String(new Date((_e$timestamp5=e.timestamp)===null||_e$timestamp5===void 0?void 0:_e$timestamp5.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix,hour=extramin>0?1:0,hourly=parseInt(String(new Date((_e$timestamp6=e.timestamp)===null||_e$timestamp6===void 0?void 0:_e$timestamp6.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT)>24?(parseInt(String(new Date((_e$timestamp7=e.timestamp)===null||_e$timestamp7===void 0?void 0:_e$timestamp7.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT))%24:parseInt(String(new Date((_e$timestamp8=e.timestamp)===null||_e$timestamp8===void 0?void 0:_e$timestamp8.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT)),hourly?hourly%12:\"00\",\" : \",minutes!==0?minutes<10?\"0\"+minutes:minutes:\"00\",hourly>12?\" PM\":\" AM\"))):/*#__PURE__*/React.createElement(\"p\",{className:\"chat__messages \".concat(e.name===displayName&&\"chat__reciever\")},/*#__PURE__*/React.createElement(\"span\",{className:\"chat__name\"},e.name.substr(0,e.name.indexOf(\" \"))),/*#__PURE__*/React.createElement(Linkify,null,e.messageData),/*#__PURE__*/React.createElement(\"span\",{className:\"chat__timestamp\"},/*#__PURE__*/React.createElement(\"div\",{className:\"hidden\"},extramin=parseInt(String(new Date((_e$timestamp9=e.timestamp)===null||_e$timestamp9===void 0?void 0:_e$timestamp9.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)>60?(parseInt(String(new Date((_e$timestamp10=e.timestamp)===null||_e$timestamp10===void 0?void 0:_e$timestamp10.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes))%60:0,minutes=parseInt(String(new Date((_e$timestamp11=e.timestamp)===null||_e$timestamp11===void 0?void 0:_e$timestamp11.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix>60?(parseInt(String(new Date((_e$timestamp12=e.timestamp)===null||_e$timestamp12===void 0?void 0:_e$timestamp12.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix)%60:parseInt(String(new Date((_e$timestamp13=e.timestamp)===null||_e$timestamp13===void 0?void 0:_e$timestamp13.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix,hour=extramin>0?1:0,hourly=parseInt(String(new Date((_e$timestamp14=e.timestamp)===null||_e$timestamp14===void 0?void 0:_e$timestamp14.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT)>24?(parseInt(String(new Date((_e$timestamp15=e.timestamp)===null||_e$timestamp15===void 0?void 0:_e$timestamp15.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT))%24:parseInt(String(new Date((_e$timestamp16=e.timestamp)===null||_e$timestamp16===void 0?void 0:_e$timestamp16.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT)),hourly?hourly%12:\"00\",\" : \",minutes!==0?minutes<10?\"0\"+minutes:minutes:\"00\",hourly>12?\" PM\":\" AM\"));}));}//  console.log(Object.keys(item))\n// console.log(item[Object.keys(item)])\n):// <div className=\"chat__body__daystamp\">\n//     <p className=\"chat__body__daystamp__title\"></p>\n//  </div>\n// Object.entries(datewise).forEach(\n//     ([key, value]) => {\n//     {\n//     value.forEach((item,i)=>{\n//             console.log(item.messageData,item.name)\n//         })\n//     }\n// }\n// )\nnull,/*#__PURE__*/React.createElement(\"div\",{ref:messagesEndRef})),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__footer\"},/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(InsertEmoticonIcon,{className:\"yellow\",onClick:function onClick(){return setEmoji(!emoji);}}),emoji?/*#__PURE__*/React.createElement(Picker,{onSelect:addEmoji}):null),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"input\",{value:input,type:\"text\",placeholder:\"Type a message\",onChange:function onChange(e){return setInput(e.target.value);},onClick:checkEmojiClose,disabled:roomName===\"Admin: Ali\"?(displayName==\"Shekh Aliul WqnNsFNEPr\"?true:false)?false:true:false}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:sendMessage},\"Send A message\")),/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(MicIcon,null))),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__footer__absolute\"},/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(InsertEmoticonIcon,null)),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"input\",{value:input,type:\"text\",placeholder:\"Type a message\",onChange:function onChange(e){return setInput(e.target.value);},disabled:roomName==\"Admin: Ali\"?true:false}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:sendMessage},\"Send A message\")),/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(MicIcon,null)))):/*#__PURE__*/React.createElement(\"div\",{className:\"chat\"},/*#__PURE__*/React.createElement(\"div\",{className:\"chat__header\"},/*#__PURE__*/React.createElement(Avatar,{src:lastseenPhoto}),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__headerInfo\"},/*#__PURE__*/React.createElement(\"h3\",null,roomName),/*#__PURE__*/React.createElement(\"p\",{className:\"header__lastSeen\"},\"last seen\",\" \",messages.length!==0?String((_messages$timestamp3=messages[messages.length-1].timestamp)===null||_messages$timestamp3===void 0?void 0:_messages$timestamp3.toDate().toUTCString()).slice(0,22):\"Loading\")),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__headerRight\"},/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(SearchOutlined,null)),/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(AttachFile,null)),/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(MoreVertIcon,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__body scrollbar-juicy-peach\",onClick:checkEmojiClose},datewise.length>0?datewise.map(function(item,i){return item[Object.keys(item)].map(function(e,i){var _String,_e$timestamp17,_e$timestamp18,_e$timestamp19,_e$timestamp20,_e$timestamp21,_e$timestamp22,_e$timestamp23,_e$timestamp24,_e$timestamp25,_e$timestamp26,_e$timestamp27,_e$timestamp28,_e$timestamp29,_e$timestamp30,_e$timestamp31,_e$timestamp32;return i==0?/*#__PURE__*/React.createElement(React.Fragment,null,((_String=String(Object.keys(item)))===null||_String===void 0?void 0:_String.slice(0,2))!==\"id\"&&Object.keys(item)!=undefined?/*#__PURE__*/React.createElement(\"div\",{className:\"chat__body__daystamp\"},/*#__PURE__*/React.createElement(\"p\",{className:\"chat__body__daystamp__title\"},parseInt(String(Object.keys(item)).slice(0,2))==parseInt(String(new Date().getDate()))?\"TODAY\":Object.keys(item))):\"\",/*#__PURE__*/React.createElement(\"p\",{className:\"chat__messages \".concat(e.name===displayName&&\"chat__reciever\")},/*#__PURE__*/React.createElement(\"span\",{className:\"chat__name\"},e.name.substr(0,e.name.indexOf(\" \"))),/*#__PURE__*/React.createElement(Linkify,{properties:{target:\"_blank\",style:{color:\"red\",fontWeight:\"bold\"}}},e.messageData),/*#__PURE__*/React.createElement(\"span\",{className:\"chat__timestamp\"},/*#__PURE__*/React.createElement(\"div\",{className:\"hidden\"},extramin=parseInt(String(new Date((_e$timestamp17=e.timestamp)===null||_e$timestamp17===void 0?void 0:_e$timestamp17.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)>60?(parseInt(String(new Date((_e$timestamp18=e.timestamp)===null||_e$timestamp18===void 0?void 0:_e$timestamp18.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes))%60:0,minutes=parseInt(String(new Date((_e$timestamp19=e.timestamp)===null||_e$timestamp19===void 0?void 0:_e$timestamp19.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix>60?(parseInt(String(new Date((_e$timestamp20=e.timestamp)===null||_e$timestamp20===void 0?void 0:_e$timestamp20.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix)%60:parseInt(String(new Date((_e$timestamp21=e.timestamp)===null||_e$timestamp21===void 0?void 0:_e$timestamp21.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix,hour=extramin>0?1:0,hourly=parseInt(String(new Date((_e$timestamp22=e.timestamp)===null||_e$timestamp22===void 0?void 0:_e$timestamp22.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT)>24?(parseInt(String(new Date((_e$timestamp23=e.timestamp)===null||_e$timestamp23===void 0?void 0:_e$timestamp23.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT))%24:parseInt(String(new Date((_e$timestamp24=e.timestamp)===null||_e$timestamp24===void 0?void 0:_e$timestamp24.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT)),hourly?hourly%12:\"00\",\" : \",minutes!==0?minutes<10?\"0\"+minutes:minutes:\"00\",hourly>12?\" PM\":\" AM\"))):/*#__PURE__*/React.createElement(\"p\",{className:\"chat__messages \".concat(e.name===displayName&&\"chat__reciever\")},/*#__PURE__*/React.createElement(\"span\",{className:\"chat__name\"},e.name.substr(0,e.name.indexOf(\" \"))),/*#__PURE__*/React.createElement(Linkify,null,e.messageData),/*#__PURE__*/React.createElement(\"span\",{className:\"chat__timestamp\"},/*#__PURE__*/React.createElement(\"div\",{className:\"hidden\"},extramin=parseInt(String(new Date((_e$timestamp25=e.timestamp)===null||_e$timestamp25===void 0?void 0:_e$timestamp25.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)>60?(parseInt(String(new Date((_e$timestamp26=e.timestamp)===null||_e$timestamp26===void 0?void 0:_e$timestamp26.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes))%60:0,minutes=parseInt(String(new Date((_e$timestamp27=e.timestamp)===null||_e$timestamp27===void 0?void 0:_e$timestamp27.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix>60?(parseInt(String(new Date((_e$timestamp28=e.timestamp)===null||_e$timestamp28===void 0?void 0:_e$timestamp28.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix)%60:parseInt(String(new Date((_e$timestamp29=e.timestamp)===null||_e$timestamp29===void 0?void 0:_e$timestamp29.toDate()).toUTCString()).slice(20,22))+parseInt(GMTminutes)+extramin-fix,hour=extramin>0?1:0,hourly=parseInt(String(new Date((_e$timestamp30=e.timestamp)===null||_e$timestamp30===void 0?void 0:_e$timestamp30.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT)>24?(parseInt(String(new Date((_e$timestamp31=e.timestamp)===null||_e$timestamp31===void 0?void 0:_e$timestamp31.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT))%24:parseInt(String(new Date((_e$timestamp32=e.timestamp)===null||_e$timestamp32===void 0?void 0:_e$timestamp32.toDate()).toUTCString()).slice(17,19))+hour+parseInt(clientGMT)),hourly?hourly%12:\"00\",\" : \",minutes!==0?minutes<10?\"0\"+minutes:minutes:\"00\",hourly>12?\" PM\":\" AM\"));});}//  console.log(Object.keys(item))\n// console.log(item[Object.keys(item)])\n):// <div className=\"chat__body__daystamp\">\n//     <p className=\"chat__body__daystamp__title\"></p>\n//  </div>\n// Object.entries(datewise).forEach(\n//     ([key, value]) => {\n//     {\n//     value.forEach((item,i)=>{\n//             console.log(item.messageData,item.name)\n//         })\n//     }\n// }\n// )\nnull,/*#__PURE__*/React.createElement(\"div\",{ref:messagesEndRef,id:\"chat__box\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"chat__footer\"},/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(InsertEmoticonIcon,{className:\"yellow\",onClick:function onClick(){return setEmoji(!emoji);}}),emoji?/*#__PURE__*/React.createElement(Picker,{onSelect:addEmoji}):null),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"input\",{value:input,type:\"text\",placeholder:\"Type a message\",onChange:function onChange(e){return setInput(e.target.value);},onClick:checkEmojiClose,disabled:roomName===\"Admin: Ali\"?(displayName==\"Shekh Aliul WqnNsFNEPr\"?true:false)?false:true:false}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:sendMessage},\"Send A message\")),/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(MicIcon,null)))));}export default Chat;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/New folder/WhatsappClone/src/Chat.js"],"names":["React","useEffect","useState","useRef","Avatar","IconButton","AttachFile","MoreVertIcon","SearchOutlined","InsertEmoticonIcon","MicIcon","ArrowBackIcon","db","firebase","Link","useParams","useStateValue","actionTypes","UseWindowDimensions","useSound","Picker","Linkify","Chat","seed","setSeed","input","setInput","roomId","roomName","setRoomName","messages","setMessages","toggler","setToggler","displayName","localStorage","getItem","togglerState","dispatch","photoURL","emoji","setEmoji","issendChecked","setIssendChecked","datewise","setDateWise","clientGMT","setClinetGMT","lastseenPhoto","setLastseen","width","hour","extramin","minutes","hourly","GMTminutes","String","slice","scrl","fix","process","env","PUBLIC_URL","volume","playOn","playOff","addEmoji","e","native","checkEmojiClose","getTimeZone","offset","Date","getTimezoneOffset","o","Math","abs","floor","random","collection","doc","onSnapshot","snapshot","data","name","orderBy","docs","map","length","sendMessage","preventDefault","add","message","timestamp","firestore","FieldValue","serverTimestamp","blankObj","TotalObj","checkDate","blankArray","dateArray","forEach","i","messageDate","toDate","toUTCString","indexOf","push","index","messageData","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","handleDrawerToggle","type","SET_TOGGLER","item","Object","keys","parseInt","getDate","substr","target","value","undefined","style","color","fontWeight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { Avatar, IconButton } from \"@material-ui/core\";\r\nimport AttachFile from \"@material-ui/icons/AttachFile\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\nimport SearchOutlined from \"@material-ui/icons/SearchOutlined\";\r\nimport InsertEmoticonIcon from \"@material-ui/icons/InsertEmoticon\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport db from \"./firebase\";\r\nimport firebase from \"firebase\";\r\nimport \"./Chat.css\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport { actionTypes } from \"./reducer\";\r\nimport UseWindowDimensions from \"./UseWindowDimensions\";\r\nimport useSound from \"use-sound\";\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport Linkify from \"react-linkify\";\r\n\r\nfunction Chat() {\r\n  const [seed, setSeed] = useState(\"\");\r\n  const [input, setInput] = useState(\"\");\r\n  const { roomId } = useParams();\r\n  const [roomName, setRoomName] = useState(\"false\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [toggler, setToggler] = useState(true);\r\n  const displayName = localStorage.getItem(\"displayName\");\r\n  const [{ togglerState }, dispatch] = useStateValue();\r\n  const [{ photoURL }] = useStateValue();\r\n  const [emoji, setEmoji] = useState(false);\r\n  const [issendChecked, setIssendChecked] = useState(false);\r\n  const [datewise, setDateWise] = useState([]);\r\n  const [clientGMT, setClinetGMT] = useState(\"\");\r\n  const [lastseenPhoto, setLastseen] = useState(\"\");\r\n  // const [isRecChecked, setIsRecChecked]=useState(1);\r\n  const { width } = UseWindowDimensions();\r\n  var hour = 0,\r\n    extramin = 0,\r\n    minutes = 0,\r\n    hourly = 0,\r\n    GMTminutes = String(clientGMT).slice(4, 6),\r\n    scrl,\r\n    fix = 0;\r\n  // console.log(GMTminutes)\r\n\r\n  //console.log(roomId);\r\n\r\n  const [playOn] = useSound(`${process.env.PUBLIC_URL}/send.mp3`, {\r\n    volume: 0.5,\r\n  });\r\n  const [playOff] = useSound(`${process.env.PUBLIC_URL}/send.mp3`, {\r\n    volume: 0.5,\r\n  });\r\n\r\n  const addEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setInput(input + emoji);\r\n  };\r\n  const checkEmojiClose = () => {\r\n    if (emoji) {\r\n      setEmoji(false);\r\n    }\r\n  };\r\n  //console.log(photoURL);\r\n  // console.log(messages);\r\n  function getTimeZone() {\r\n    var offset = new Date().getTimezoneOffset(),\r\n      o = Math.abs(offset);\r\n    return (\r\n      (offset < 0 ? \"+\" : \"-\") +\r\n      (\"00\" + Math.floor(o / 60)).slice(-2) +\r\n      \":\" +\r\n      (\"00\" + (o % 60)).slice(-2)\r\n    );\r\n  }\r\n  useEffect(() => {\r\n    setClinetGMT(getTimeZone());\r\n    //  console.log(clientGMT);\r\n  });\r\n  useEffect(() => {\r\n    setSeed(Math.floor(Math.random() * 5000));\r\n    if (roomId) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .onSnapshot((snapshot) => {\r\n          setRoomName(snapshot.data().name);\r\n        });\r\n\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"asc\")\r\n        .onSnapshot((snapshot) => {\r\n          setMessages(snapshot.docs.map((doc) => doc.data()));\r\n        });\r\n    }\r\n  }, [roomId]);\r\n  useEffect(() => {\r\n    setLastseen(messages[messages.length - 1]?.photoURL);\r\n  }, [messages]);\r\n\r\n  //  console.log(lastseenPhoto);\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    // console.log(\"You Typedd >>>>\",input);\r\n    if (input.length > 0) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .add({\r\n          message: input,\r\n          name: displayName,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n          photoURL: localStorage.getItem(\"photoURL\"),\r\n        });\r\n      setIssendChecked(!issendChecked);\r\n      issendChecked ? playOff() : playOn();\r\n      setInput(\"\");\r\n    }\r\n  };\r\n\r\n  // for deletion in future\r\n\r\n  // let collectionRef = fs.collection(\"rooms\");\r\n  // collectionRef.where(\"name\", \"==\", name)\r\n  // .get()\r\n  // .then(querySnapshot => {\r\n  // querySnapshot.forEach((doc) => {\r\n  //     doc.ref.delete().then(() => {\r\n  //     console.log(\"Document successfully deleted!\");\r\n  //     }).catch(function(error) {\r\n  //     console.error(\"Error removing document: \", error);\r\n  //     });\r\n  // });\r\n  // })\r\n  // .catch(function(error) {\r\n  // console.log(\"Error getting documents: \", error);\r\n  // });\r\n\r\n  let blankObj = {};\r\n  let TotalObj = [];\r\n  if (messages.length > 0) {\r\n    // for( const message in messages){\r\n\r\n    // }\r\n    let checkDate = \"\";\r\n    let blankArray = [];\r\n    let dateArray = [];\r\n    messages.forEach(function (message, i) {\r\n      let messageDate = String(\r\n        new Date(message.timestamp?.toDate()).toUTCString()\r\n      ).slice(5, 12);\r\n      if (dateArray.indexOf(messageDate) === -1) {\r\n        dateArray.push(messageDate);\r\n      }\r\n    });\r\n    //let tempObj={};\r\n    var index = 0;\r\n    messages.forEach(function (message, i) {\r\n      let messageDate = String(\r\n        new Date(message.timestamp?.toDate()).toUTCString()\r\n      ).slice(5, 12);\r\n      // console.log((message.timestamp+new Date()?.getTimezoneOffset()))\r\n      if (messageDate === dateArray[index] && i == messages.length - 1) {\r\n        blankArray.push({\r\n          messageData: message.message,\r\n          name: message.name,\r\n          timestamp: message.timestamp,\r\n        });\r\n        blankObj[dateArray[index]] = blankArray;\r\n        TotalObj.push(blankObj);\r\n        blankObj = {};\r\n        blankArray = [];\r\n        blankArray.push({\r\n          messageData: message.message,\r\n          name: message.name,\r\n          timestamp: message.timestamp,\r\n        });\r\n        index = index + 1;\r\n      } else if (messageDate == dateArray[index]) {\r\n        blankArray.push({\r\n          messageData: message.message,\r\n          name: message.name,\r\n          timestamp: message.timestamp,\r\n        });\r\n      } else {\r\n        blankObj[dateArray[index]] = blankArray;\r\n        TotalObj.push(blankObj);\r\n        blankObj = {};\r\n        blankArray = [];\r\n        blankArray.push({\r\n          messageData: message.message,\r\n          name: message.name,\r\n          timestamp: message.timestamp,\r\n        });\r\n        if (messageDate != dateArray[index] && i == messages.length - 1) {\r\n          blankObj[messageDate] = blankArray;\r\n          TotalObj.push(blankObj);\r\n        }\r\n        index = index + 1;\r\n      }\r\n    });\r\n  }\r\n  useEffect(() => {\r\n    setDateWise(TotalObj);\r\n  }, [messages]);\r\n  //  console.log(TotalObj);\r\n  // if(Object.keys(datewise).length !== 0){\r\n  //     Object.entries(datewise).forEach(\r\n  //         ([key, value]) => {\r\n  //             console.log(key);\r\n  //             value.forEach((item,i)=>{\r\n  //                 console.log(item.messageData,item.name);\r\n  //             });\r\n  //         }\r\n  //     );\r\n  // }\r\n\r\n  const messagesEndRef = useRef(null);\r\n  const scrollToBottom = () => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n    // console.log('called')\r\n  };\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  });\r\n\r\n  useEffect(() => {\r\n    setToggler(!toggler);\r\n  }, [togglerState]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n    //   scrl= document.getElementById(\"chat__box\")\r\n    //  console.log(messagesEndRef.current.clientHeight);\r\n    //  scrl.scrollIntoView(false);\r\n  }, [messages]);\r\n  const handleDrawerToggle = () => {\r\n    setToggler(!toggler);\r\n    dispatch({\r\n      type: actionTypes.SET_TOGGLER,\r\n      togglerState: togglerState + 1,\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n      {width < 629 ? (\r\n        <div className={togglerState % 2 === 0 ? \"chat\" : \"chat hide__chat\"}>\r\n          <div className=\"chat__header\">\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              edge=\"start\"\r\n              onClick={handleDrawerToggle}\r\n            >\r\n              <ArrowBackIcon />\r\n            </IconButton>\r\n            <Avatar src={lastseenPhoto} />\r\n            <div className=\"chat__headerInfo\">\r\n              <h3>{roomName}</h3>\r\n              <p className=\"header__lastSeen\">\r\n                last seen{\" \"}\r\n                {messages.length !== 0\r\n                  ? messages[messages.length - 1].timestamp\r\n                      ?.toDate()\r\n                      .toUTCString()\r\n                  : \"Loading\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"chat__headerRight\">\r\n              <IconButton>\r\n                <SearchOutlined />\r\n              </IconButton>\r\n              <IconButton>\r\n                <AttachFile />\r\n              </IconButton>\r\n              <IconButton>\r\n                <MoreVertIcon />\r\n              </IconButton>\r\n            </div>\r\n          </div>\r\n          <div className=\"chat__header__absolute\">\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              edge=\"start\"\r\n              onClick={handleDrawerToggle}\r\n            >\r\n              <ArrowBackIcon />\r\n            </IconButton>\r\n            <Avatar src={lastseenPhoto} />\r\n            <div className=\"chat__headerInfo\">\r\n              <h3>{roomName}</h3>\r\n              <p className=\"header__lastSeen\">\r\n                last seen{\" \"}\r\n                {messages.length !== 0\r\n                  ? String(\r\n                      messages[messages.length - 1].timestamp\r\n                        ?.toDate()\r\n                        .toUTCString()\r\n                    ).slice(0, 22)\r\n                  : \"Loading\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"chat__headerRight\">\r\n              <IconButton>\r\n                <SearchOutlined />\r\n              </IconButton>\r\n              <IconButton>\r\n                <AttachFile />\r\n              </IconButton>\r\n              <IconButton>\r\n                <MoreVertIcon />\r\n              </IconButton>\r\n            </div>\r\n          </div>\r\n          <div className=\"chat__body\">\r\n            {datewise.length > 0\r\n              ? datewise.map(\r\n                  (item, i) =>\r\n                    //  <div className=\"chat__body__daystamp\">\r\n                    //     <p className=\"chat__body__daystamp__title\">{Object.keys(item)}</p>\r\n                    //  </div>\r\n                    item[Object.keys(item)].map((e, i) =>\r\n                      i == 0 ? (\r\n                        <>\r\n                          {String(Object.keys(item)).slice(0, 2) !== \"id\" &&\r\n                          parseInt(String(Object.keys(item)).slice(0, 2)) ? (\r\n                            <div className=\"chat__body__daystamp\">\r\n                              <p className=\"chat__body__daystamp__title\">\r\n                                {parseInt(\r\n                                  String(Object.keys(item)).slice(0, 2)\r\n                                ) == parseInt(String(new Date().getDate()))\r\n                                  ? \"TODAY\"\r\n                                  : Object.keys(item)}\r\n                              </p>\r\n                            </div>\r\n                          ) : null}\r\n                          <p\r\n                            className={`chat__messages ${\r\n                              e.name === displayName && \"chat__reciever\"\r\n                            }`}\r\n                          >\r\n                            <span className=\"chat__name\">\r\n                              {e.name.substr(0, e.name.indexOf(\" \"))}\r\n                            </span>\r\n                            <Linkify>{e.messageData}</Linkify>\r\n                            <span className=\"chat__timestamp\">\r\n                              <div className=\"hidden\">\r\n                                {\r\n                                  (extramin =\r\n                                    parseInt(\r\n                                      String(\r\n                                        new Date(\r\n                                          e.timestamp?.toDate()\r\n                                        ).toUTCString()\r\n                                      ).slice(20, 22)\r\n                                    ) +\r\n                                      parseInt(GMTminutes) >\r\n                                    60\r\n                                      ? (parseInt(\r\n                                          String(\r\n                                            new Date(\r\n                                              e.timestamp?.toDate()\r\n                                            ).toUTCString()\r\n                                          ).slice(20, 22)\r\n                                        ) +\r\n                                          parseInt(GMTminutes)) %\r\n                                        60\r\n                                      : 0)\r\n                                }\r\n\r\n                                {\r\n                                  (minutes =\r\n                                    parseInt(\r\n                                      String(\r\n                                        new Date(\r\n                                          e.timestamp?.toDate()\r\n                                        ).toUTCString()\r\n                                      ).slice(20, 22)\r\n                                    ) +\r\n                                      parseInt(GMTminutes) +\r\n                                      extramin -\r\n                                      fix >\r\n                                    60\r\n                                      ? (parseInt(\r\n                                          String(\r\n                                            new Date(\r\n                                              e.timestamp?.toDate()\r\n                                            ).toUTCString()\r\n                                          ).slice(20, 22)\r\n                                        ) +\r\n                                          parseInt(GMTminutes) +\r\n                                          extramin -\r\n                                          fix) %\r\n                                        60\r\n                                      : parseInt(\r\n                                          String(\r\n                                            new Date(\r\n                                              e.timestamp?.toDate()\r\n                                            ).toUTCString()\r\n                                          ).slice(20, 22)\r\n                                        ) +\r\n                                        parseInt(GMTminutes) +\r\n                                        extramin -\r\n                                        fix)\r\n                                }\r\n                                {(hour = extramin > 0 ? 1 : 0)}\r\n\r\n                                {\r\n                                  (hourly =\r\n                                    parseInt(\r\n                                      String(\r\n                                        new Date(\r\n                                          e.timestamp?.toDate()\r\n                                        ).toUTCString()\r\n                                      ).slice(17, 19)\r\n                                    ) +\r\n                                      hour +\r\n                                      parseInt(clientGMT) >\r\n                                    24\r\n                                      ? (parseInt(\r\n                                          String(\r\n                                            new Date(\r\n                                              e.timestamp?.toDate()\r\n                                            ).toUTCString()\r\n                                          ).slice(17, 19)\r\n                                        ) +\r\n                                          hour +\r\n                                          parseInt(clientGMT)) %\r\n                                        24\r\n                                      : parseInt(\r\n                                          String(\r\n                                            new Date(\r\n                                              e.timestamp?.toDate()\r\n                                            ).toUTCString()\r\n                                          ).slice(17, 19)\r\n                                        ) +\r\n                                        hour +\r\n                                        parseInt(clientGMT))\r\n                                }\r\n                              </div>\r\n                              {hourly ? hourly % 12 : \"00\"}\r\n                              {\" : \"}\r\n                              {minutes !== 0\r\n                                ? minutes < 10\r\n                                  ? \"0\" + minutes\r\n                                  : minutes\r\n                                : \"00\"}\r\n                              {hourly > 12 ? \" PM\" : \" AM\"}\r\n                            </span>\r\n                          </p>\r\n                        </>\r\n                      ) : (\r\n                        <p\r\n                          className={`chat__messages ${\r\n                            e.name === displayName && \"chat__reciever\"\r\n                          }`}\r\n                        >\r\n                          <span className=\"chat__name\">\r\n                            {e.name.substr(0, e.name.indexOf(\" \"))}\r\n                          </span>\r\n                          <Linkify>{e.messageData}</Linkify>\r\n                          <span className=\"chat__timestamp\">\r\n                            <div className=\"hidden\">\r\n                              {\r\n                                (extramin =\r\n                                  parseInt(\r\n                                    String(\r\n                                      new Date(\r\n                                        e.timestamp?.toDate()\r\n                                      ).toUTCString()\r\n                                    ).slice(20, 22)\r\n                                  ) +\r\n                                    parseInt(GMTminutes) >\r\n                                  60\r\n                                    ? (parseInt(\r\n                                        String(\r\n                                          new Date(\r\n                                            e.timestamp?.toDate()\r\n                                          ).toUTCString()\r\n                                        ).slice(20, 22)\r\n                                      ) +\r\n                                        parseInt(GMTminutes)) %\r\n                                      60\r\n                                    : 0)\r\n                              }\r\n\r\n                              {\r\n                                (minutes =\r\n                                  parseInt(\r\n                                    String(\r\n                                      new Date(\r\n                                        e.timestamp?.toDate()\r\n                                      ).toUTCString()\r\n                                    ).slice(20, 22)\r\n                                  ) +\r\n                                    parseInt(GMTminutes) +\r\n                                    extramin -\r\n                                    fix >\r\n                                  60\r\n                                    ? (parseInt(\r\n                                        String(\r\n                                          new Date(\r\n                                            e.timestamp?.toDate()\r\n                                          ).toUTCString()\r\n                                        ).slice(20, 22)\r\n                                      ) +\r\n                                        parseInt(GMTminutes) +\r\n                                        extramin -\r\n                                        fix) %\r\n                                      60\r\n                                    : parseInt(\r\n                                        String(\r\n                                          new Date(\r\n                                            e.timestamp?.toDate()\r\n                                          ).toUTCString()\r\n                                        ).slice(20, 22)\r\n                                      ) +\r\n                                      parseInt(GMTminutes) +\r\n                                      extramin -\r\n                                      fix)\r\n                              }\r\n                              {(hour = extramin > 0 ? 1 : 0)}\r\n\r\n                              {\r\n                                (hourly =\r\n                                  parseInt(\r\n                                    String(\r\n                                      new Date(\r\n                                        e.timestamp?.toDate()\r\n                                      ).toUTCString()\r\n                                    ).slice(17, 19)\r\n                                  ) +\r\n                                    hour +\r\n                                    parseInt(clientGMT) >\r\n                                  24\r\n                                    ? (parseInt(\r\n                                        String(\r\n                                          new Date(\r\n                                            e.timestamp?.toDate()\r\n                                          ).toUTCString()\r\n                                        ).slice(17, 19)\r\n                                      ) +\r\n                                        hour +\r\n                                        parseInt(clientGMT)) %\r\n                                      24\r\n                                    : parseInt(\r\n                                        String(\r\n                                          new Date(\r\n                                            e.timestamp?.toDate()\r\n                                          ).toUTCString()\r\n                                        ).slice(17, 19)\r\n                                      ) +\r\n                                      hour +\r\n                                      parseInt(clientGMT))\r\n                              }\r\n                            </div>\r\n                            {hourly ? hourly % 12 : \"00\"}\r\n                            {\" : \"}\r\n                            {minutes !== 0\r\n                              ? minutes < 10\r\n                                ? \"0\" + minutes\r\n                                : minutes\r\n                              : \"00\"}\r\n                            {hourly > 12 ? \" PM\" : \" AM\"}\r\n                          </span>\r\n                        </p>\r\n                      )\r\n                    )\r\n                  //  console.log(Object.keys(item))\r\n                  // console.log(item[Object.keys(item)])\r\n                )\r\n              : // <div className=\"chat__body__daystamp\">\r\n                //     <p className=\"chat__body__daystamp__title\"></p>\r\n                //  </div>\r\n                // Object.entries(datewise).forEach(\r\n                //     ([key, value]) => {\r\n\r\n                //     {\r\n                //     value.forEach((item,i)=>{\r\n                //             console.log(item.messageData,item.name)\r\n                //         })\r\n                //     }\r\n                // }\r\n                // )\r\n\r\n                null}\r\n            <div ref={messagesEndRef}></div>\r\n          </div>\r\n\r\n          <div className=\"chat__footer\">\r\n            {/* <InsertEmoticonIcon onClick={<Picker onSelect={addEmoji} />}/> */}\r\n            <IconButton>\r\n              {/* <InsertEmoticonIcon /> */}\r\n              <InsertEmoticonIcon\r\n                className=\"yellow\"\r\n                onClick={() => setEmoji(!emoji)}\r\n              />\r\n              {emoji ? <Picker onSelect={addEmoji} /> : null}\r\n            </IconButton>\r\n            {/* <span>\r\n                                <Picker onSelect={addEmoji} />\r\n                            </span> */}\r\n\r\n            <form>\r\n              <input\r\n                value={input}\r\n                type=\"text\"\r\n                placeholder=\"Type a message\"\r\n                onChange={(e) => setInput(e.target.value)}\r\n                onClick={checkEmojiClose}\r\n                disabled={\r\n                  roomName === \"Admin: Ali\"\r\n                    ? (displayName == \"Shekh Aliul WqnNsFNEPr\" ? true : false)\r\n                      ? false\r\n                      : true\r\n                    : false\r\n                }\r\n              />\r\n              <button type=\"submit\" onClick={sendMessage}>\r\n                Send A message\r\n              </button>\r\n            </form>\r\n            <IconButton>\r\n              <MicIcon />\r\n            </IconButton>\r\n          </div>\r\n\r\n          <div className=\"chat__footer__absolute\">\r\n            <IconButton>\r\n              <InsertEmoticonIcon />\r\n            </IconButton>\r\n            <form>\r\n              <input\r\n                value={input}\r\n                type=\"text\"\r\n                placeholder=\"Type a message\"\r\n                onChange={(e) => setInput(e.target.value)}\r\n                disabled={roomName == \"Admin: Ali\" ? true : false}\r\n              />\r\n              <button type=\"submit\" onClick={sendMessage}>\r\n                Send A message\r\n              </button>\r\n            </form>\r\n            <IconButton>\r\n              <MicIcon />\r\n            </IconButton>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className={\"chat\"}>\r\n          <div className=\"chat__header\">\r\n            <Avatar src={lastseenPhoto} />\r\n            <div className=\"chat__headerInfo\">\r\n              <h3>{roomName}</h3>\r\n              <p className=\"header__lastSeen\">\r\n                last seen{\" \"}\r\n                {messages.length !== 0\r\n                  ? String(\r\n                      messages[messages.length - 1].timestamp\r\n                        ?.toDate()\r\n                        .toUTCString()\r\n                    ).slice(0, 22)\r\n                  : \"Loading\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"chat__headerRight\">\r\n              <IconButton>\r\n                <SearchOutlined />\r\n              </IconButton>\r\n              <IconButton>\r\n                <AttachFile />\r\n              </IconButton>\r\n              <IconButton>\r\n                <MoreVertIcon />\r\n              </IconButton>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className=\"chat__body scrollbar-juicy-peach\"\r\n            onClick={checkEmojiClose}\r\n          >\r\n            {datewise.length > 0\r\n              ? datewise.map(\r\n                  (item, i) =>\r\n                    item[Object.keys(item)].map((e, i) =>\r\n                      i == 0 ? (\r\n                        <>\r\n                          {String(Object.keys(item))?.slice(0, 2) !== \"id\" &&\r\n                          Object.keys(item) != undefined ? (\r\n                            <div className=\"chat__body__daystamp\">\r\n                              <p className=\"chat__body__daystamp__title\">\r\n                                {parseInt(\r\n                                  String(Object.keys(item)).slice(0, 2)\r\n                                ) == parseInt(String(new Date().getDate()))\r\n                                  ? \"TODAY\"\r\n                                  : Object.keys(item)}\r\n                              </p>\r\n                            </div>\r\n                          ) : (\r\n                            \"\"\r\n                          )}\r\n                          <p\r\n                            className={`chat__messages ${\r\n                              e.name === displayName && \"chat__reciever\"\r\n                            }`}\r\n                          >\r\n                            <span className=\"chat__name\">\r\n                              {e.name.substr(0, e.name.indexOf(\" \"))}\r\n                            </span>\r\n                            <Linkify\r\n                              properties={{\r\n                                target: \"_blank\",\r\n                                style: { color: \"red\", fontWeight: \"bold\" },\r\n                              }}\r\n                            >\r\n                              {e.messageData}\r\n                            </Linkify>\r\n                            <span className=\"chat__timestamp\">\r\n                              <div className=\"hidden\">\r\n                                {\r\n                                  (extramin =\r\n                                    parseInt(\r\n                                      String(\r\n                                        new Date(\r\n                                          e.timestamp?.toDate()\r\n                                        ).toUTCString()\r\n                                      ).slice(20, 22)\r\n                                    ) +\r\n                                      parseInt(GMTminutes) >\r\n                                    60\r\n                                      ? (parseInt(\r\n                                          String(\r\n                                            new Date(\r\n                                              e.timestamp?.toDate()\r\n                                            ).toUTCString()\r\n                                          ).slice(20, 22)\r\n                                        ) +\r\n                                          parseInt(GMTminutes)) %\r\n                                        60\r\n                                      : 0)\r\n                                }\r\n\r\n                                {\r\n                                  (minutes =\r\n                                    parseInt(\r\n                                      String(\r\n                                        new Date(\r\n                                          e.timestamp?.toDate()\r\n                                        ).toUTCString()\r\n                                      ).slice(20, 22)\r\n                                    ) +\r\n                                      parseInt(GMTminutes) +\r\n                                      extramin -\r\n                                      fix >\r\n                                    60\r\n                                      ? (parseInt(\r\n                                          String(\r\n                                            new Date(\r\n                                              e.timestamp?.toDate()\r\n                                            ).toUTCString()\r\n                                          ).slice(20, 22)\r\n                                        ) +\r\n                                          parseInt(GMTminutes) +\r\n                                          extramin -\r\n                                          fix) %\r\n                                        60\r\n                                      : parseInt(\r\n                                          String(\r\n                                            new Date(\r\n                                              e.timestamp?.toDate()\r\n                                            ).toUTCString()\r\n                                          ).slice(20, 22)\r\n                                        ) +\r\n                                        parseInt(GMTminutes) +\r\n                                        extramin -\r\n                                        fix)\r\n                                }\r\n                                {(hour = extramin > 0 ? 1 : 0)}\r\n\r\n                                {\r\n                                  (hourly =\r\n                                    parseInt(\r\n                                      String(\r\n                                        new Date(\r\n                                          e.timestamp?.toDate()\r\n                                        ).toUTCString()\r\n                                      ).slice(17, 19)\r\n                                    ) +\r\n                                      hour +\r\n                                      parseInt(clientGMT) >\r\n                                    24\r\n                                      ? (parseInt(\r\n                                          String(\r\n                                            new Date(\r\n                                              e.timestamp?.toDate()\r\n                                            ).toUTCString()\r\n                                          ).slice(17, 19)\r\n                                        ) +\r\n                                          hour +\r\n                                          parseInt(clientGMT)) %\r\n                                        24\r\n                                      : parseInt(\r\n                                          String(\r\n                                            new Date(\r\n                                              e.timestamp?.toDate()\r\n                                            ).toUTCString()\r\n                                          ).slice(17, 19)\r\n                                        ) +\r\n                                        hour +\r\n                                        parseInt(clientGMT))\r\n                                }\r\n                              </div>\r\n                              {hourly ? hourly % 12 : \"00\"}\r\n                              {\" : \"}\r\n                              {minutes !== 0\r\n                                ? minutes < 10\r\n                                  ? \"0\" + minutes\r\n                                  : minutes\r\n                                : \"00\"}\r\n                              {hourly > 12 ? \" PM\" : \" AM\"}\r\n                            </span>\r\n                          </p>\r\n                        </>\r\n                      ) : (\r\n                        <p\r\n                          className={`chat__messages ${\r\n                            e.name === displayName && \"chat__reciever\"\r\n                          }`}\r\n                        >\r\n                          <span className=\"chat__name\">\r\n                            {e.name.substr(0, e.name.indexOf(\" \"))}\r\n                          </span>\r\n                          <Linkify>{e.messageData}</Linkify>\r\n                          <span className=\"chat__timestamp\">\r\n                            <div className=\"hidden\">\r\n                              {\r\n                                (extramin =\r\n                                  parseInt(\r\n                                    String(\r\n                                      new Date(\r\n                                        e.timestamp?.toDate()\r\n                                      ).toUTCString()\r\n                                    ).slice(20, 22)\r\n                                  ) +\r\n                                    parseInt(GMTminutes) >\r\n                                  60\r\n                                    ? (parseInt(\r\n                                        String(\r\n                                          new Date(\r\n                                            e.timestamp?.toDate()\r\n                                          ).toUTCString()\r\n                                        ).slice(20, 22)\r\n                                      ) +\r\n                                        parseInt(GMTminutes)) %\r\n                                      60\r\n                                    : 0)\r\n                              }\r\n\r\n                              {\r\n                                (minutes =\r\n                                  parseInt(\r\n                                    String(\r\n                                      new Date(\r\n                                        e.timestamp?.toDate()\r\n                                      ).toUTCString()\r\n                                    ).slice(20, 22)\r\n                                  ) +\r\n                                    parseInt(GMTminutes) +\r\n                                    extramin -\r\n                                    fix >\r\n                                  60\r\n                                    ? (parseInt(\r\n                                        String(\r\n                                          new Date(\r\n                                            e.timestamp?.toDate()\r\n                                          ).toUTCString()\r\n                                        ).slice(20, 22)\r\n                                      ) +\r\n                                        parseInt(GMTminutes) +\r\n                                        extramin -\r\n                                        fix) %\r\n                                      60\r\n                                    : parseInt(\r\n                                        String(\r\n                                          new Date(\r\n                                            e.timestamp?.toDate()\r\n                                          ).toUTCString()\r\n                                        ).slice(20, 22)\r\n                                      ) +\r\n                                      parseInt(GMTminutes) +\r\n                                      extramin -\r\n                                      fix)\r\n                              }\r\n                              {(hour = extramin > 0 ? 1 : 0)}\r\n\r\n                              {\r\n                                (hourly =\r\n                                  parseInt(\r\n                                    String(\r\n                                      new Date(\r\n                                        e.timestamp?.toDate()\r\n                                      ).toUTCString()\r\n                                    ).slice(17, 19)\r\n                                  ) +\r\n                                    hour +\r\n                                    parseInt(clientGMT) >\r\n                                  24\r\n                                    ? (parseInt(\r\n                                        String(\r\n                                          new Date(\r\n                                            e.timestamp?.toDate()\r\n                                          ).toUTCString()\r\n                                        ).slice(17, 19)\r\n                                      ) +\r\n                                        hour +\r\n                                        parseInt(clientGMT)) %\r\n                                      24\r\n                                    : parseInt(\r\n                                        String(\r\n                                          new Date(\r\n                                            e.timestamp?.toDate()\r\n                                          ).toUTCString()\r\n                                        ).slice(17, 19)\r\n                                      ) +\r\n                                      hour +\r\n                                      parseInt(clientGMT))\r\n                              }\r\n                            </div>\r\n                            {hourly ? hourly % 12 : \"00\"}\r\n                            {\" : \"}\r\n                            {minutes !== 0\r\n                              ? minutes < 10\r\n                                ? \"0\" + minutes\r\n                                : minutes\r\n                              : \"00\"}\r\n                            {hourly > 12 ? \" PM\" : \" AM\"}\r\n                          </span>\r\n                        </p>\r\n                      )\r\n                    )\r\n                  //  console.log(Object.keys(item))\r\n                  // console.log(item[Object.keys(item)])\r\n                )\r\n              : // <div className=\"chat__body__daystamp\">\r\n                //     <p className=\"chat__body__daystamp__title\"></p>\r\n                //  </div>\r\n                // Object.entries(datewise).forEach(\r\n                //     ([key, value]) => {\r\n\r\n                //     {\r\n                //     value.forEach((item,i)=>{\r\n                //             console.log(item.messageData,item.name)\r\n                //         })\r\n                //     }\r\n                // }\r\n                // )\r\n\r\n                null}\r\n            <div ref={messagesEndRef} id=\"chat__box\"></div>\r\n          </div>\r\n\r\n          <div className=\"chat__footer\">\r\n            <IconButton>\r\n              {/* <InsertEmoticonIcon /> */}\r\n              <InsertEmoticonIcon\r\n                className=\"yellow\"\r\n                onClick={() => setEmoji(!emoji)}\r\n              />\r\n              {emoji ? <Picker onSelect={addEmoji} /> : null}\r\n            </IconButton>\r\n            <form>\r\n              <input\r\n                value={input}\r\n                type=\"text\"\r\n                placeholder=\"Type a message\"\r\n                onChange={(e) => setInput(e.target.value)}\r\n                onClick={checkEmojiClose}\r\n                disabled={\r\n                  roomName === \"Admin: Ali\"\r\n                    ? (displayName == \"Shekh Aliul WqnNsFNEPr\" ? true : false)\r\n                      ? false\r\n                      : true\r\n                    : false\r\n                }\r\n              />\r\n              <button type=\"submit\" onClick={sendMessage}>\r\n                Send A message\r\n              </button>\r\n            </form>\r\n            <IconButton>\r\n              <MicIcon />\r\n            </IconButton>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"]},"metadata":{},"sourceType":"module"}